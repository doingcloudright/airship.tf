(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{169:function(e,t,s){"use strict";s.r(t);var a=s(18),n=Object(a.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"ec2-specific"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ec2-specific","aria-hidden":"true"}},[e._v("#")]),e._v(" EC2 Specific")]),e._v(" "),s("p",[e._v("For EC2 Backed ECS Cluster nodes there are a few extra configuration possibilties.")]),e._v(" "),s("h2",{attrs:{id:"placement-strategy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#placement-strategy","aria-hidden":"true"}},[e._v("#")]),e._v(" Placement Strategy")]),e._v(" "),s("p",[e._v("By default the ECS Scheduler is not placing the ECS Tasks of an ECS Cluster spread, in some cases this can lead to\nhaving a tasks belonging to one ECS Service placed on one EC2 instance, even when there are multiple EC2 Instances available.")]),e._v(" "),s("p",[e._v("By enabling "),s("code",[e._v("with_placement_strategy")]),e._v(" in the module, the ECS tasks are configured with the following spread.")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[e._v("module "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"demo_web"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  ..\n  with_placement_strategy = "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),e._v("\n  ..\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("p",[e._v("Configured spread inside the ECS Service.")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[e._v("ordered_placement_strategy "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  field = "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"attribute:ecs.availability-zone"')]),e._v("\n  type  = "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"spread"')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\nordered_placement_strategy "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  field = "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"instanceId"')]),e._v("\n  type  = "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"spread"')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\nordered_placement_strategy "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  field = "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"memory"')]),e._v("\n  type  = "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"binpack"')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("h2",{attrs:{id:"scheduling-strategy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scheduling-strategy","aria-hidden":"true"}},[e._v("#")]),e._v(" Scheduling Strategy")]),e._v(" "),s("p",[e._v("The "),s("a",{attrs:{href:"https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs_services.html#service_scheduler",target:"_blank",rel:"noopener noreferrer"}},[e._v("Service Scheduler"),s("OutboundLink")],1),e._v(" is set to 'Replica' by default. The replica scheduling strategy places and maintains the desired number of tasks across your cluster. By default, the service scheduler spreads tasks across Availability Zones. You can use task placement strategies and constraints to customize task placement decisions.")]),e._v(" "),s("p",[e._v("The daemon scheduling strategy deploys exactly one task on each active container instance that meets all of the task placement constraints that you specify in your cluster. When using this strategy, there is no need to specify a desired number of tasks, a task placement strategy, or use Service Auto Scaling policies. For example, this can be helpful to run monitoring tools on the ECS Cluster where exactly one task is needed per instance.")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[e._v("module "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"demo_web"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  ..\n  scheduling_strategy = "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"DAEMON"')]),e._v("\n  ..\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("h2",{attrs:{id:"volume-mounting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#volume-mounting","aria-hidden":"true"}},[e._v("#")]),e._v(" Volume Mounting")]),e._v(" "),s("p",[e._v("TODO")])])},[],!1,null,null,null);n.options.__file="ec2_specific.md";t.default=n.exports}}]);