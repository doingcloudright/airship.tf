(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{174:function(e,t,a){"use strict";a.r(t);var s=a(18),r=Object(s.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"secrets-management"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#secrets-management","aria-hidden":"true"}},[e._v("#")]),e._v(" Secrets Management")]),e._v(" "),a("h2",{attrs:{id:"chamber"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#chamber","aria-hidden":"true"}},[e._v("#")]),e._v(" Chamber")]),e._v(" "),a("p",[e._v("The built in access to KMS and SSM make it possible to store application variables inside SSM. KMS is used to encrypt or decrypt the variables stored inside SSM.")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/segmentio/chamber/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Chamber"),a("OutboundLink")],1),e._v(" can be used inside Docker to retrieve the values from SSM and expose them as ENV vars to the application")]),e._v(" "),a("p",[e._v("A modified CMD inside a Dockerfile which would normally runs "),a("code",[e._v("application_run.sh")]),e._v(" will now first run chamber. And Chamber will exec "),a("code",[e._v("application_run.sh")]),e._v(" and replace it's own PID doing so.")]),e._v(" "),a("div",{staticClass:"language-docker extra-class"},[a("pre",{pre:!0,attrs:{class:"language-docker"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" example\n..\n..\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CMD")]),e._v(" exec chamber exec application/servicename "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" application_run.sh\n")])])]),a("h2",{attrs:{id:"creating-secrets-for-chamber"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creating-secrets-for-chamber","aria-hidden":"true"}},[e._v("#")]),e._v(" Creating secrets for chamber")]),e._v(" "),a("p",[e._v("Outside of the ECS Module you can create the secrets stored inside SSM.")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[e._v("resource "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"aws_ssm_parameter"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"environment"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  name   = "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/application/servicename/environment"')]),e._v("\n  type   = "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"SecureString"')]),e._v("\n  key_id = "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"ARN of the KMS"')]),e._v("\n  value  = "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"production"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])])},[],!1,null,null,null);r.options.__file="secrets_management.md";t.default=r.exports}}]);